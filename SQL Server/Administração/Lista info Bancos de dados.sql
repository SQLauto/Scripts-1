use master 
go 
select   @@servername as 'server', sys.databases.name as databasename, sys.master_files.name as datafile   , sys.master_files.physical_name   , substring(sys.master_files.physical_name, 1, CHARINDEX('\', sys.master_files.physical_name, 5)) as Disco   , sys.master_files.differential_base_time  -- , sys.databases.create_date   
, sys.databases.collation_name   , sys.master_files.size / 128 / 1024 as TamanhoGB   , sys.master_files.size / 128 as TamanhoMB , getdate() 
 /*   , (CAST(FILEPROPERTY(sys.database_files.name, 'SpaceUsed') AS int)/128.0) + 10 as TamanhoASerAtingido   , 'RAISERROR ('' '', 10, 1) WITH NOWAIT;'   + 'RAISERROR ('' '', 10, 1) WITH NOWAIT;'   + 'RAISERROR (''-- *************************************************************** --'', 10, 1) WITH NOWAIT;'   + 'RAISERROR (''-- ***** Efetuando o shrink no datafile ' + sys.database_files.name + ' ***** --'', 10, 1) WITH NOWAIT;'   + 'RAISERROR (''-- *************************************************************** --'', 10, 1) WITH NOWAIT;'   + 'USE ' + sys.databases.name + ';'   + 'CHECKPOINT;'  -- + 'DBCC SHRINKFILE (' + sys.master_files.name  + ', ' + cast(cast((CAST(FILEPROPERTY(sys.database_files.name, 'SpaceUsed') AS int)/128.0) + 10 as int) as char) + ');'  */
from sys.master_files  inner join sys.databases on    sys.databases.database_id = sys.master_files.database_id  inner join sys.database_files on    sys.database_files.file_id = sys.master_files.file_id  
